"use strict";(self.webpackChunkai=self.webpackChunkai||[]).push([[206],{206:(I,m,s)=>{s.r(m),s.d(m,{DraftModule:()=>x});var g=s(9808),p=s(7508),h=s(6418),f=s(7805),r=s(1146),t=s(2096),C=s(6536),v=s(7688);const _=["iptUpload"],y=["canvasCon"],b=["appCon"],w=["loadingCon"],D=["hideImage"];function Z(n,a){if(1&n&&t._UZ(0,"img",18),2&n){const e=a.$implicit,o=t.oxw();t.Q6J("src",o.getImageUrl(e.index),t.LSH)}}function M(n,a){if(1&n&&t._UZ(0,"img",18),2&n){const e=a.$implicit,o=t.oxw();t.Q6J("src",o.getImageUrl(e.index),t.LSH)}}const T=[{path:"",component:(()=>{class n{constructor(e){this.cd=e,this.most=[],this.others=[]}forceUpdate(){Promise.resolve().then(()=>{this.cd&&this.cd.detectChanges()})}ngAfterViewInit(){r.FBF("./assets/data/draft/model/my-model.json").then(e=>{this.model=e,this.appCon.nativeElement.className="",this.loadingCon.nativeElement.className="hide"}),this.initCanvas()}initCanvas(){let e=this.canvasCon.nativeElement;this.draw=new f.Z(e,256,256,{style:{borderStyle:"solid",borderColor:"none"},backgroundColor:"white",strokeColor:"#333333",strokeWeight:4}),this.canvas=e.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.ctx?this.ctx.strokeStyle="#333333":console.warn("no content 2d")}getImageUrl(e){return`./assets/data/draft/images/${e}.jpg`}onHideImgLoad(){r.lub(()=>{let e=r.Xhn.fromPixels(this.hideImage.nativeElement,1),o=r.BHj.resizeBilinear(e.asType("float32"),[32,32]);this.model.predict(r.knu([o])).array().then(c=>{let u=c[0].map((l,d)=>({value:l,index:d})).sort((l,d)=>d.value-l.value);this.most=u.splice(0,3),this.others=u,this.forceUpdate()})})}predict(){this.model&&(this.hideImage.nativeElement.src=this.canvas.toDataURL())}clearCanvas(){this.draw&&this.draw.reset()}clickUploadBtn(){this.iptUpload.nativeElement.click()}uploadImage(e){let o=new Image;o.src=URL.createObjectURL(e.target.files[0]),o.onload=()=>{if(this.canvas){let i=this.canvas.getContext("2d");i&&i.drawImage(o,0,0,256,256)}}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mds-draft"]],viewQuery:function(e,o){if(1&e&&(t.Gf(_,5),t.Gf(y,5),t.Gf(b,5),t.Gf(w,5),t.Gf(D,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.iptUpload=i.first),t.iGM(i=t.CRH())&&(o.canvasCon=i.first),t.iGM(i=t.CRH())&&(o.appCon=i.first),t.iGM(i=t.CRH())&&(o.loadingCon=i.first),t.iGM(i=t.CRH())&&(o.hideImage=i.first)}},decls:29,vars:2,consts:[["loadingCon",""],[1,"hide"],["appCon",""],["primary","Webex AI Draft","secondary","Draw a draft or upload an image to search Momentum icons.\n        <br>Currenttly we only test momentum <a target='_blank' href='https://www.figma.com/file/SXK8Gb5tMlN9xiG2cC4OBu/Assets---Icon-Library?node-id=1001%3A2553'>Presence icon</a>","className","middle"],[1,"canvas"],["canvasCon",""],[1,"hide",3,"load"],["hideImage",""],["type","file","accept","image/png, image/jpeg",1,"hide",3,"change"],["iptUpload",""],[1,"list-con"],[1,"button-blue",3,"click"],[1,"button-orange",3,"click"],[1,"button-red",3,"click"],["primary","Result","secondary","Select the right answer to help us to improve the AI model.","className","small"],[3,"src",4,"ngFor","ngForOf"],["primary","Other Results","className","small"],[1,"button-green"],[3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",null,0),t._uU(2,"Loading "),t.qZA(),t.TgZ(3,"div",1,2)(5,"webex-con"),t._UZ(6,"webex-description",3)(7,"div",4,5),t.TgZ(9,"img",6,7),t.NdJ("load",function(){return o.onHideImgLoad()}),t.qZA(),t.TgZ(11,"input",8,9),t.NdJ("change",function(c){return o.uploadImage(c)}),t.qZA(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return o.clearCanvas()}),t._uU(15,"clear canvas"),t.qZA(),t.TgZ(16,"button",12),t.NdJ("click",function(){return o.clickUploadBtn()}),t._uU(17,"upload JPG/PNG"),t.qZA(),t.TgZ(18,"button",13),t.NdJ("click",function(){return o.predict()}),t._uU(19,"Predict"),t.qZA()(),t._UZ(20,"webex-description",14),t.TgZ(21,"div",10),t.YNc(22,Z,1,1,"img",15),t.qZA(),t._UZ(23,"webex-description",16),t.TgZ(24,"div",10),t.YNc(25,M,1,1,"img",15),t.qZA(),t.TgZ(26,"div",10)(27,"button",17),t._uU(28,"This is what I need!"),t.qZA()()()()),2&e&&(t.xp6(22),t.Q6J("ngForOf",o.most),t.xp6(3),t.Q6J("ngForOf",o.others))},dependencies:[g.sg,C.J,v.w],styles:["[_nghost-%COMP%]{display:block;height:auto;line-height:auto;width:100%;overflow:hidden;margin-bottom:10rem}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}webex-description[_ngcontent-%COMP%]{margin-top:2rem}.canvas[_ngcontent-%COMP%]{margin-top:1rem}.canvas[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;height:256px;line-height:256px;width:256px;box-shadow:0 0 1px 1px #fff3}.list-con[_ngcontent-%COMP%]{margin-top:2rem}.list-con[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;height:64px;line-height:64px;width:64px;border:none}"]}),n})()}];let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(T),h.Bz]}),n})(),x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,p.Le,p.EY,U]}),n})()}}]);